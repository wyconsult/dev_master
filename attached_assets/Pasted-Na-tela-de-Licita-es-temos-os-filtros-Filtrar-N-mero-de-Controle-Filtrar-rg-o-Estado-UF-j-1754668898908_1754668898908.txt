Na tela de "Licita√ß√µes" temos os filtros Filtrar N√∫mero de Controle, Filtrar √ìrg√£o, Estado (UF). 
junto a eles entre o filtro √≥rg√£o e estado √© preciso colocar o filtro " Filtrar Cidade".

Alem disso logo abaixo do card onde est√£o os filtros vamos precisar fazer os filtros avan√ßados: "Op√ß√µes Avan√ßadas de Filtros"
e nela vai conter os seguintes filtros que est√£o dentro desse trecho de c√≥digo de exemplo:

export default function Biddings() {
  // Estados existentes
  const [numeroControle, setNumeroControle] = useState("");
  const [selectedOrgaos, setSelectedOrgaos] = useState<string[]>([]);
  const [selectedUFs, setSelectedUFs] = useState<string[]>([]);
  const [orgaoPopoverOpen, setOrgaoPopoverOpen] = useState(false);
  const [ufPopoverOpen, setUfPopoverOpen] = useState(false);

  // Novos estados para filtros adicionais
  const [cidade, setCidade] = useState("");
  const [objeto, setObjeto] = useState("");
  const [valorMinimo, setValorMinimo] = useState("");
  const [valorMaximo, setValorMaximo] = useState("");
  const [mostrarSemValor, setMostrarSemValor] = useState(false);

  // Estados para filtros de data
  const [dataInicio, setDataInicio] = useState("");
  const [dataFim, setDataFim] = useState("");
  const [tipoData, setTipoData] = useState<"abertura" | "documento">(
    "abertura"
  );

  // Estado para controlar expans√£o dos filtros avan√ßados
  const [filtrosAvancadosExpandidos, setFiltrosAvancadosExpandidos] = useState(false);

  const { data: allBiddings = [], isLoading } = useQuery<Bidding[]>({
    queryKey: ["/api/biddings"],
    staleTime: 5 * 60 * 1000, // 5 minutos
    refetchOnWindowFocus: false,
  });

  // Extrair √≥rg√£os √∫nicos dos dados reais
  const uniqueOrgaos = Array.from(
    new Set(allBiddings.map((b) => b.orgao_nome))
  ).sort();

  // Fun√ß√£o para converter valor string para n√∫mero
  const parseValor = (valor: string): number => {
    if (!valor) return 0;
    // Remove caracteres n√£o num√©ricos exceto v√≠rgulas e pontos
    const cleanValue = valor.replace(/[^\d,.-]/g, "").replace(",", ".");
    return parseFloat(cleanValue) || 0;
  };

  // Fun√ß√£o para verificar se data est√° no range
  const isDateInRange = (
    dateString: string,
    inicio: string,
    fim: string
  ): boolean => {
    if (!dateString || (!inicio && !fim)) return true;

    const date = new Date(dateString);
    const startDate = inicio ? new Date(inicio) : null;
    const endDate = fim ? new Date(fim) : null;

    if (startDate && date < startDate) return false;
    if (endDate && date > endDate) return false;

    return true;
  };

  // Filtro din√¢mico em tempo real - ATUALIZADO
  const filteredBiddings = allBiddings.filter((bidding) => {
    // Filtro por n√∫mero de controle
    if (
      numeroControle &&
      !bidding.conlicitacao_id.toString().includes(numeroControle)
    ) {
      return false;
    }

    // Filtro por √≥rg√£os selecionados
    if (
      selectedOrgaos.length > 0 &&
      !selectedOrgaos.includes(bidding.orgao_nome)
    ) {
      return false;
    }

    // Filtro por UFs selecionados
    if (selectedUFs.length > 0 && !selectedUFs.includes(bidding.orgao_uf)) {
      return false;
    }

    // Filtro por cidade
    if (
      cidade &&
      !bidding.orgao_cidade?.toLowerCase().includes(cidade.toLowerCase())
    ) {
      return false;
    }

    // Filtro por objeto
    if (
      objeto &&
      !bidding.objeto_licitacao?.toLowerCase().includes(objeto.toLowerCase())
    ) {
      return false;
    }

    // Filtro por valores
    if (valorMinimo || valorMaximo) {
      const valorBidding = parseValor(bidding.valor_estimado || "");

      if (valorMinimo && valorBidding < parseFloat(valorMinimo)) {
        return false;
      }

      if (valorMaximo && valorBidding > parseFloat(valorMaximo)) {
        return false;
      }
    }

    // Filtro para mostrar apenas sem valor
    if (mostrarSemValor) {
      const valor = parseValor(bidding.valor_estimado || "");
      if (valor > 0) return false;
    }

    // Filtro por data
    if (dataInicio || dataFim) {
      const campoData =
        tipoData === "abertura"
          ? bidding.data_abertura
          : bidding.data_documento;
      if (!isDateInRange(campoData || "", dataInicio, dataFim)) {
        return false;
      }
    }

    return true;
  });

  const toggleOrgao = (orgao: string) => {
    setSelectedOrgaos((prev) =>
      prev.includes(orgao) ? prev.filter((o) => o !== orgao) : [...prev, orgao]
    );
  };

  const toggleUF = (uf: string) => {
    setSelectedUFs((prev) =>
      prev.includes(uf) ? prev.filter((u) => u !== uf) : [...prev, uf]
    );
  };

  const clearFilters = () => {
    setNumeroControle("");
    setSelectedOrgaos([]);
    setSelectedUFs([]);
    setCidade("");
    setObjeto("");
    setValorMinimo("");
    setValorMaximo("");
    setMostrarSemValor(false);
    setDataInicio("");
    setDataFim("");
  };

  const toggleTipoData = () => {
    setTipoData((prev) => (prev === "abertura" ? "documento" : "abertura"));
  };

  const toggleFiltrosAvancados = () => {
    setFiltrosAvancadosExpandidos(!filtrosAvancadosExpandidos);
  };

  if (isLoading) {
    return (
      <div className="min-h-screen bg-gray-50">
        <Navbar />
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <div className="animate-pulse">
            <div className="h-8 bg-gray-200 rounded w-1/4 mb-4"></div>
            <div className="space-y-4">
              {[...Array(3)].map((_, i) => (
                <div key={i} className="h-48 bg-gray-200 rounded"></div>
              ))}
            </div>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50">
      <Navbar />
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="mb-8 md:mb-12 text-center px-4">
          <div className="inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 text-white mb-4 md:mb-6 shadow-lg">
            <Search className="h-8 w-8 md:h-10 md:w-10" />
          </div>
          <h1 className="text-2xl md:text-4xl font-bold bg-gradient-to-r from-gray-900 to-green-700 bg-clip-text text-transparent mb-2 md:mb-3">
            Licita√ß√µes
          </h1>
          <p className="text-lg md:text-xl text-gray-600 mb-1 md:mb-2">
            Busca Inteligente üîç
          </p>
          <p className="text-sm md:text-base text-gray-500">
            Encontre e acompanhe processos licitat√≥rios
          </p>
        </div>

        {/* Filtros Principais - Sempre Vis√≠veis */}
        <Card className="mb-4 border-0 shadow-xl bg-white/80 backdrop-blur-sm mx-4">
          <CardHeader className="pb-4">
            <CardTitle className="text-lg md:text-xl flex items-center gap-2">
              <Filter className="h-4 w-4 md:h-5 md:w-5" />
              Filtros Principais
            </CardTitle>
          </CardHeader>
          <CardContent className="px-3 md:px-6 space-y-4">
            {/* Filtros principais em grid */}
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4">
              {/* N√∫mero de Controle */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  N¬∞ Controle
                </label>
                <Input
                  placeholder="Ex. 13157470"
                  value={numeroControle}
                  onChange={(e) => setNumeroControle(e.target.value)}
                  className="border-gray-300 text-gray-700 placeholder:text-gray-400 h-10"
                />
              </div>

              {/* Filtrar √ìrg√£o */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Filtrar √ìrg√£o
                </label>
                <Popover
                  open={orgaoPopoverOpen}
                  onOpenChange={setOrgaoPopoverOpen}
                >
                  <PopoverTrigger asChild>
                    <Button
                      variant="outline"
                      role="combobox"
                      className="w-full justify-between border-gray-300 text-gray-700 h-10"
                    >
                      {selectedOrgaos.length === 0
                        ? "Selecione √≥rg√£o(s)"
                        : `${selectedOrgaos.length} √≥rg√£o(s)`}
                    </Button>
                  </PopoverTrigger>
                  <PopoverContent className="w-80 p-0 z-50 bg-white border border-gray-200 shadow-lg">
                    <Command>
                      <CommandInput placeholder="Buscar √≥rg√£o..." />
                      <CommandEmpty>Nenhum √≥rg√£o encontrado.</CommandEmpty>
                      <CommandGroup className="max-h-64 overflow-auto">
                        {uniqueOrgaos.map((orgao) => (
                          <CommandItem
                            key={orgao}
                            onSelect={() => toggleOrgao(orgao)}
                            className="flex items-center gap-2"
                          >
                            <Checkbox
                              checked={selectedOrgaos.includes(orgao)}
                              onChange={() => toggleOrgao(orgao)}
                            />
                            <span className="flex-1 text-sm">{orgao}</span>
                          </CommandItem>
                        ))}
                      </CommandGroup>
                    </Command>
                  </PopoverContent>
                </Popover>
              </div>

              {/* Cidade */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Cidade
                </label>
                <Input
                  placeholder="Ex. S√£o Paulo"
                  value={cidade}
                  onChange={(e) => setCidade(e.target.value)}
                  className="border-gray-300 text-gray-700 placeholder:text-gray-400 h-10"
                />
              </div>

              {/* Estado (UF) */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Estado (UF)
                </label>
                <Popover open={ufPopoverOpen} onOpenChange={setUfPopoverOpen}>
                  <PopoverTrigger asChild>
                    <Button
                      variant="outline"
                      role="combobox"
                      className="w-full justify-between border-gray-300 text-gray-700 h-10"
                    >
                      {selectedUFs.length === 0
                        ? "Selecione UF(s)"
                        : selectedUFs.join(", ")}
                    </Button>
                  </PopoverTrigger>
                  <PopoverContent className="w-64 p-0 z-50 bg-white border border-gray-200 shadow-lg">
                    <Command>
                      <CommandInput placeholder="Buscar UF..." />
                      <CommandEmpty>Nenhuma UF encontrada.</CommandEmpty>
                      <CommandGroup className="max-h-64 overflow-auto">
                        {UF_OPTIONS.map((uf) => (
                          <CommandItem
                            key={uf.code}
                            onSelect={() => toggleUF(uf.code)}
                            className="flex items-center gap-2"
                          >
                            <Checkbox
                              checked={selectedUFs.includes(uf.code)}
                              onChange={() => toggleUF(uf.code)}
                            />
                            <span>{uf.name}</span>
                          </CommandItem>
                        ))}
                      </CommandGroup>
                    </Command>
                  </PopoverContent>
                </Popover>
              </div>
            </div>

            {/* Tags de filtros selecionados */}
            <div className="space-y-2">
              {selectedOrgaos.length > 0 && (
                <div className="flex flex-wrap gap-1">
                  {selectedOrgaos.map((orgao) => (
                    <Badge key={orgao} variant="secondary" className="text-xs">
                      {orgao.length > 30 ? `${orgao.substring(0, 30)}...` : orgao}
                      <button
                        onClick={() => toggleOrgao(orgao)}
                        className="ml-1 hover:text-destructive"
                      >
                        <X className="h-3 w-3" />
                      </button>
                    </Badge>
                  ))}
                </div>
              )}
              
              {selectedUFs.length > 0 && (
                <div className="flex flex-wrap gap-1">
                  {selectedUFs.map((uf) => (
                    <Badge key={uf} variant="secondary" className="text-xs">
                      {UF_OPTIONS.find((opt) => opt.code === uf)?.name || uf}
                      <button
                        onClick={() => toggleUF(uf)}
                        className="ml-1 hover:text-destructive"
                      >
                        <X className="h-3 w-3" />
                      </button>
                    </Badge>
                  ))}
                </div>
              )}
            </div>
          </CardContent>
        </Card>

        {/* Bot√£o para expandir filtros avan√ßados */}
        <div className="flex justify-center mb-4">
          <Button
            variant="outline"
            onClick={toggleFiltrosAvancados}
            className="border-gray-300 text-gray-700 hover:bg-gray-50 px-6 py-2"
          >
            <span className="mr-2">
              {filtrosAvancadosExpandidos ? "Ocultar" : "Mostrar"} Filtros Avan√ßados
            </span>
            {filtrosAvancadosExpandidos ? (
              <ChevronUp className="h-4 w-4" />
            ) : (
              <ChevronDown className="h-4 w-4" />
            )}
          </Button>
        </div>

        {/* Filtros Avan√ßados - Expans√≠vel */}
        {filtrosAvancadosExpandidos && (
          <Card className="mb-6 border-0 shadow-xl bg-white/80 backdrop-blur-sm mx-4">
            <CardHeader className="pb-4">
              <CardTitle className="text-lg md:text-xl flex items-center gap-2">
                <Filter className="h-4 w-4 md:h-5 md:w-5" />
                Filtros Avan√ßados
              </CardTitle>
            </CardHeader>
            <CardContent className="px-3 md:px-6 space-y-6">
              {/* Objeto da Licita√ß√£o */}
              <div className="grid grid-cols-1 gap-3 md:gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Objeto da Licita√ß√£o
                  </label>
                  <Input
                    placeholder="Ex. alimenta√ß√£o, limpeza, material de escrit√≥rio"
                    value={objeto}
                    onChange={(e) => setObjeto(e.target.value)}
                    className="border-gray-300 text-gray-700 placeholder:text-gray-400 h-10"
                  />
                </div>
              </div>

              {/* Filtros de Valor */}
              <div className="grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Valor M√≠nimo (R$)
                  </label>
                  <Input
                    type="number"
                    placeholder="Ex. 10000"
                    value={valorMinimo}
                    onChange={(e) => setValorMinimo(e.target.value)}
                    className="border-gray-300 text-gray-700 placeholder:text-gray-400 h-10"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Valor M√°ximo (R$)
                  </label>
                  <Input
                    type="number"
                    placeholder="Ex. 100000"
                    value={valorMaximo}
                    onChange={(e) => setValorMaximo(e.target.value)}
                    className="border-gray-300 text-gray-700 placeholder:text-gray-400 h-10"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Filtros Especiais
                  </label>
                  <div className="flex items-center space-x-2 h-10">
                    <Checkbox
                      id="sem-valor"
                      checked={mostrarSemValor}
                      onCheckedChange={(checked) =>
                        setMostrarSemValor(checked as boolean)
                      }
                    />
                    <label
                      htmlFor="sem-valor"
                      className="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                    >
                      Mostrar apenas sem valor
                    </label>
                  </div>
                </div>
              </div>

              {/* Filtros de Data */}
              <div className="grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Data In√≠cio
                  </label>
                  <Input
                    type="date"
                    value={dataInicio}
                    onChange={(e) => setDataInicio(e.target.value)}
                    className="border-gray-300 text-gray-700 h-10"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Data Fim
                  </label>
                  <Input
                    type="date"
                    value={dataFim}
                    onChange={(e) => setDataFim(e.target.value)}
                    className="border-gray-300 text-gray-700 h-10"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Tipo de Data
                  </label>
                  <Button
                    variant="outline"
                    onClick={toggleTipoData}
                    className="w-full h-10 justify-start border-gray-300"
                  >
                    {tipoData === "abertura" ? (
                      <>
                        <Calendar className="mr-2 h-4 w-4" />
                        Data de Abertura
                      </>
                    ) : (
                      <>
                        <CalendarDays className="mr-2 h-4 w-4" />
                        Data do Documento
                      </>
                    )}
                    {tipoData === "abertura" ? (
                      <ToggleLeft className="ml-auto h-4 w-4" />
                    ) : (
                      <ToggleRight className="ml-auto h-4 w-4" />
                    )}
                  </Button>
                </div>
              </div>
            </CardContent>
          </Card>
        )}

        {/* Bot√µes de A√ß√£o */}
        <Card className="mb-6 border-0 shadow-xl bg-white/80 backdrop-blur-sm mx-4">
          <CardContent className="px-3 md:px-6 py-4">
            <div className="flex flex-col md:flex-row items-stretch md:items-center gap-2">
              <div className="flex-1">
                <p className="text-sm text-gray-600">
                  <strong>{filteredBiddings.length}</strong> licita√ß√£o(√µes)
                  encontrada(s)
                </p>
              </div>

              <div className="flex gap-2">
                <Button
                  className="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white border-0 shadow-lg"
                  onClick={() => {
                    // Fun√ß√£o de pesquisa (se necess√°rio processar algo)
                    console.log("Filtros aplicados:", {
                      numeroControle,
                      cidade,
                      objeto,
                      valorMinimo,
                      valorMaximo,
                      mostrarSemValor,
                      selectedOrgaos,
                      selectedUFs,
                      dataInicio,
                      dataFim,
                      tipoData,
                    });
                  }}
                >
                  <Search className="mr-2 h-4 w-4" />
                  Pesquisar
                </Button>

                {(numeroControle ||
                  cidade ||
                  objeto ||
                  valorMinimo ||
                  valorMaximo ||
                  mostrarSemValor ||
                  selectedOrgaos.length > 0 ||
                  selectedUFs.length > 0 ||
                  dataInicio ||
                  dataFim) && (
                  <Button
                    variant="outline"
                    onClick={clearFilters}
                    className="border-gray-300 text-gray-700 hover:bg-gray-50"
                  >
                    <X className="mr-2 h-4 w-4" />
                    Limpar Filtros
                  </Button>
                )}
              </div>
            </div>
          </CardContent>
        </Card>

        {/* Results */}
        <div className="space-y-3 md:space-y-4 px-4">
          {filteredBiddings.length === 0 ? (
            <Card>
              <CardContent className="p-6 md:p-12 text-center">
                <Search className="h-8 w-8 md:h-12 md:w-12 text-gray-400 mx-auto mb-3 md:mb-4" />
                <h3 className="text-base md:text-lg font-medium text-gray-900 mb-2">
                  Nenhuma licita√ß√£o encontrada
                </h3>
                <p className="text-sm md:text-base text-gray-600">
                  N√£o h√° licita√ß√µes que correspondam aos seus crit√©rios de
                  pesquisa.
                </p>
              </CardContent>
            </Card>
          ) : (
            filteredBiddings.map((bidding) => (
              <BiddingCard
                key={bidding.id}
                bidding={bidding}
                showFavoriteIcon={true}
              />
            ))
          )}
        </div>
      </div>
    </div>
  );
}
